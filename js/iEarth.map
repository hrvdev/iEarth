{"version":3,"file":"iEarth.min.js","sources":["iEarth.src.js"],"names":["win","storage","localStorage","getItem","key","setItem","value","removeItem","utils","extend","dest","source","uuid","prefix","Date","now","Math","random","readableDate","time","hour","minute","hourStr","minuteStr","result","oDate","cDate","interval","ceil","toString","getHours","getMinutes","getFullYear","getDate","getMonth","MapEditor","EventEmitterClass","this","listener","prototype","addListener","eventName","callback","push","fire","callbacks","length","i","dom","$","mapEditorTitle","mapEditorInput","_bindEvent","that","on","_hide","mapName","val","trim","_reset","_show","w","innerWidth","h","innerHeight","css","fadeIn","fadeOut","createMap","html","editMap","LayerListDataController","ALL_MAP_KEY","MAP_LAYER_KEY","LAST_MAP_KEY","MAP_ID_PREFIX","LayerListDataControllerClass","allMaps","allMapsStr","JSON","parse","getLastEditMap","lastMap","currentEditMap","getMap","createDefaultMap","setDefaultMap","mapId","map","addMap","id","name","ctime","layerList","splice","stringify","updateMap","addLayerToMap","addObjectToLayer","removeMap","removeLayer","removeObject","getAllMaps","maps","LayerListViewController","dataController","htmlGenerator","_","template","mapListC","find","addClass","removeClass","selectedIndex","index","hasClass","_fillHTML","timeStr","openMap","LayerManager","LayerManagerClass","mapTitle","mapOperations","mapLayerList","mapEditor","layerListDataController","layerListViewController","mapLayerListRender","currentLayerIndex","attr","parent","e","toggleClass","stopPropagation","toggle","layers","newLayer","objectList","append","fromIndex","mapObject","hide","showMap","text","start","lastEditMap","layerManager","window","document"],"mappings":"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"}
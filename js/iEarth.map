{"version":3,"file":"iEarth.min.js","sources":["iEarth.src.js"],"names":["win","storage","localStorage","getItem","key","setItem","value","removeItem","utils","extend","dest","source","uuid","prefix","Date","now","Math","random","readableDate","time","hour","minute","hourStr","minuteStr","result","oDate","cDate","interval","ceil","toString","getHours","getMinutes","getFullYear","getDate","getMonth","MapEditor","EventEmitterClass","this","listener","prototype","addListener","eventName","callback","push","fire","callbacks","length","i","dom","$","mapEditorTitle","mapEditorInput","_bindEvent","that","on","_hide","mapName","val","trim","_reset","_show","w","innerWidth","h","innerHeight","css","fadeIn","fadeOut","createMap","html","editMap","LayerEditor","layerEditorInput","layerName","editLayer","LayerListDataController","ALL_MAP_KEY","MAP_LAYER_KEY","LAST_MAP_KEY","MAP_ID_PREFIX","LayerListDataControllerClass","allMaps","allMapsStr","JSON","parse","getLastEditMap","lastMap","currentEditMap","getMap","createDefaultMap","setDefaultMap","mapId","map","addMap","id","name","ctime","layerList","splice","stringify","updateMap","addLayerToMap","addObjectToLayer","removeMap","removeLayer","removeObject","getAllMaps","maps","LayerListViewController","dataController","htmlGenerator","_","template","mapListC","find","addClass","removeClass","selectedIndex","index","hasClass","_fillHTML","timeStr","openMap","LayerManager","LayerManagerClass","mapTitle","mapOperations","mapLayerList","mapEditor","layerEditor","layerListDataController","layerListViewController","mapLayerListRender","currentLayerIndex","attr","parent","newLayerName","updateLayerName","e","toggleClass","hideLayerObjects","showLayerObjects","stopPropagation","toggle","layers","newLayer","objectList","append","fromIndex","mapObject","hide","showMap","text","cesiumDrawer","data","_addObject","positions","infos","layerDom","children","theLayer","cesiumInfos","layerC","h4","layerIndex","layer","drawOrShowObject","hideObject","start","lastEditMap","MapTools","MapToolsClass","allTools","layerToolsDistance","layerToolsPolyline","layerToolsLabel","layerToolsHand","init","uiApp","enableLocationShower","startDrawingPolyline","startMeasureDistance","layerManager","window","document"],"mappings":"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"}
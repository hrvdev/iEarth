!function(a){var b=function(){function a(a,b){for(var c in b)a[c]=b[c]}return{extend:a}}(),c=(function(){var a=function(){this.listener={}};return a.prototype.addListener=function(a,b){this.listener[a]||(this.listener[a]=[]),this.listener[a].push(b)},a.prototype.fire=function(a){var b=this.listener[a];if(b&&b.length)for(var c=0;c<b.length;c++)b[c]()},a}(),function(){this.dom=$("#mapEditor"),this.mapEditorTitle=$("#mapEditorTitle"),this.mapEditorInput=$("#mapEditorInput"),this._bindEvent()});b.extend(c.prototype,{_bindEvent:function(){var a=this;a.dom.on("click",".layer-manager-close",function(){a._hide()}).on("click",".layer-manager-btn.cancel",function(){a._hide()}).on("click",".layer-manager-btn.ok",function(){if(a.callback){var b=a.mapEditorInput.val().trim()||"未命名的地图";a.callback(b)}a._hide()})},_reset:function(a){this.mapEditorInput.val(a)},_show:function(){var b=a.innerWidth,c=a.innerHeight;this.dom.css("left",(b-402)/2).css("top",(c-172)/2),this.dom.fadeIn(100)},_hide:function(){this.dom.fadeOut(100)},createMap:function(a){this._reset(""),this.mapEditorTitle.html("创建地图"),this.callback=a,this._show()},editMap:function(a,b){this._reset(a),this.mapEditorTitle.html("修改地图标题"),this.callback=b,this._show()}});var d=(function(){var a=function(){this.maps=[]};return b.extend(a.prototype,{addMap:function(a){var b={name:a,ctime:Date.now(),layerList:[]};this.maps.push(b)},addLayerToMap:function(){},addObjectToLayer:function(){},removeMap:function(){},removeLayer:function(){},removeObject:function(){},getAllMaps:function(){}}),a}(),function(){var c=function(){this.dom=$("#layerManager")};return b.extend(c.prototype,{_show:function(){var b=a.innerWidth,c=a.innerHeight;this.dom.css("left",(b-702)/2).css("top",(c-502)/2),this.dom.fadeIn(100)},_hide:function(){this.dom.fadeOut(100)},openMap:function(a){this.callback=a,this._show()}}),c}()),e=function(){var a=function(){this.dom=$("#mapManager"),this.mapTitle=$("#mapTitle"),this.mapOperations=$("#mapOperations"),this.mapLayerList=$("#mapLayerList"),this.mapEditor=new c,this.layerListViewController=new d,this.mapLayerListRender=_.template($("#mapLayerListTemplate").html()),this._bindEvent()};return b.extend(a.prototype,{_bindEvent:function(){var a=this;a.mapLayerList.on("click",".layer-list-manager-layer-t",function(){$(a.mapLayerList.find(".layer-list-manager-layer")[a.currentLayerIndex]).removeClass("selected"),a.currentLayerIndex=$(this).attr("data-index"),$(a.mapLayerList.find(".layer-list-manager-layer")[a.currentLayerIndex]).addClass("selected"),$(this).parent().hasClass("hide-content")&&$(this).parent().removeClass("hide-content")}).on("click",".checkbox",function(b){$(this).parent().parent().toggleClass("hide-content"),$(this).parent().parent().hasClass("hide-content")||($(a.mapLayerList.find(".layer-list-manager-layer")[a.currentLayerIndex]).removeClass("selected"),a.currentLayerIndex=$(this).attr("data-index"),$(a.mapLayerList.find(".layer-list-manager-layer")[a.currentLayerIndex]).addClass("selected")),b.stopPropagation()}),$(".layer-list-manager-bar").on("click",".operations",function(){a.mapOperations.toggle()}).on("click",".add-layer",function(){$(a.mapLayerList.find(".layer-list-manager-layer")[a.currentLayerIndex]).removeClass("selected"),a.currentLayerIndex=a.layers.length;var b={name:"未命名的图层",objectList:[]};a.mapLayerList.append(a.mapLayerListRender({layers:[b],fromIndex:a.layers.length})),a.layers.push(b),$(a.mapLayerList.find(".layer-list-manager-layer")[a.currentLayerIndex]).addClass("selected").removeClass("hide-content")}),a.mapOperations.on("click",".create",function(){a.mapOperations.hide(),a.mapEditor.createMap(function(a){})}).on("click",".open",function(){a.mapOperations.hide(),a.layerListViewController.openMap()}),a.mapTitle.on("click",function(){a.mapEditor.editMap(a.mapObject.name,function(b){a.mapObject.name=b,a.mapTitle.text(b)})})},_fillHTML:function(){this.mapTitle.html(this.mapObject.name),this.mapLayerList.html(this.mapLayerListRender({layers:this.layers,fromIndex:0}))},showMap:function(a,b){this.currentLayerIndex=0,this.mapObject=a,this.layers=b,this._fillHTML(),this.dom.fadeIn(100)}}),a}(),f=new e;f.showMap({name:"北京市地图"},[{name:"回龙观地区",objectList:[{name:"标记1",type:1,data:""},{name:"标记1",type:1,data:""}]},{name:"回龙观地区",objectList:[{name:"标记1",type:1,data:""},{name:"标记1",type:1,data:""},{name:"折线",type:2,data:""}]}])}(window,document);
//# sourceMappingURL=iEarth.map